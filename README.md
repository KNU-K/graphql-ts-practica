# graphql-ts-practica

## ğŸ—’ï¸ ì™œ í•´ë‹¹ ì£¼ì œì— ëŒ€í•œ ì˜ˆì œë¥¼ ì œì‘í•˜ëŠ”ê°€?

-   graphqlì´ Rest API ì˜ Over-fetching / Under-fetchingì— ì–¼ë§ˆë‚˜ ì˜ ëŒ€ì‘í•˜ëŠ”ì§€ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ì„œ.

### Over-fetchingì´ë€

ê°€ì ¸ì˜¨ ì •ë³´ì—ì„œ í•„ìš”í•œ ì •ë³´ëŠ” í•œì •ì ì¼ ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ Rest APIë¡œ í˜¸ì¶œì„ í•˜ê²Œë˜ë©´, ë¶ˆí•„ìš”í•œ ì •ë³´ê¹Œì§€ ê°€ì§€ê³  ì˜¤ëŠ” ê²½ìš°ê°€ ìˆë‹¤ ì´ë¥¼ `Over-fetching` ì´ë¼ê³  í•œë‹¤.

> ì„œë²„ì˜ ìì›ì´ ë‚­ë¹„ê°€ ë¨.

### Under-fetchingì´ë€?

í”„ë¡ íŠ¸ì—”ë“œì˜ í•˜ë‚˜ì˜ í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œ í”„ë¡œí•„ ì •ë³´, ê²Œì‹œë¬¼ ì •ë³´, ëŒ“ê¸€ ì •ë³´ë“± ë§ì€ ì •ë³´ë¥¼ ê°€ì§€ê³  ì™€ì•¼í•˜ì§€ë§Œ, Rest apiì—ì„œëŠ” ì´ëŸ¬í•œ ê²ƒì„ ê° ë¶€ë¶„ì— ë”°ë¼ ìš”ì²­í•´ì•¼í•œë‹¤. í•„ìš”í•œ ì •ë³´ë¥¼ í•œë²ˆì— ê°€ì ¸ì˜¤ì§€ ëª»í•˜ëŠ” ê²ƒì„ `Under-fetching` ì´ë¼ê³  í•œë‹¤.

> ì„œë²„ì— ìš”ì²­ëŸ‰ì´ ì¦ê°€í•˜ê²Œ ë¨.

### GraphQLì˜ ë“±ì¥

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì— í•„ìš”í•œ ê²ƒì„ ìµœì í™”í•˜ì—¬ í•œë²ˆì˜ ìš”ì²­ì— í•„ìš”í•œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì˜¤ëŠ” ê²ƒì„ ì£¼ ëª©í‘œë¡œ í•˜ì—¬ ë§Œë“¤ì–´ì¡Œë‹¤.

`GraphQL`ê³¼ `SQL`ì€ ê°™ì€ Query Languageì´ë‹¤. ê°„ë‹¨íˆ ë§í•´ì„œ ì§ˆì˜í˜•ìœ¼ë¡œ ìš”ì²­í•˜ì—¬ í•„ìš”ì— ë”°ë¥¸ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

## ğŸ˜Š ch1. Queryë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° (Hello world)

```tsx
import express, { Application } from "express";
import { ApolloServer } from "@apollo/server";
import { expressMiddleware } from "@apollo/server/express4";

const typeDefs = `#graphql
  type Query {
    hello: String
  }
`;

const resolvers = {
    Query: {
        hello: () => "world",
    },
};

export default async function createApp(): Promise<Application> {
    const app = express();
    const server = new ApolloServer({
        typeDefs,
        resolvers,
    });

    await server.start();
    app.use("/graphql", express.json(), expressMiddleware(server));

    return app;
}
```

ìœ„ì™€ ê°™ì´ ì½”ë“œë¥¼ êµ¬ì„±í•˜ì˜€ë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ expressë¥¼ ì‚¬ìš©í•˜ì§€ì•Šê³  graphQLë¥¼ ì œì‘í•  ìˆ˜ ìˆì§€ë§Œ, expressì™€ í•¨ê»˜ ìœ ì—°í•˜ê²Œ ë™ì‘í•˜ëŠ” graphQLì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.

expressì˜ ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ì„œ resolverì— ì ‘ê·¼í•˜ì—¬ Queryë¥¼ í™•ì¸ í›„ ë‹µì„ ì¤„ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

í˜„ì¬ ì±•í„°ì—ì„œ `npm test`ë¥¼ í†µí•´ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•´ë³´ì.

```json
query : "query { hello }"
```

ë¼ëŠ” í˜•ì‹ì˜ ì¿¼ë¦¬ë¥¼ json í˜•ì‹ìœ¼ë¡œ ë³´ë‚´ê²Œ ë˜ë©´, ì¼ë°˜ Rest APIì™€ ê°™ì€ JSONí˜•íƒœë¡œ ì‘ë‹µì„ ë°›ì„ ìˆ˜ ìˆê²Œ ëœë‹¤. í•´ë‹¹ í…ŒìŠ¤íŠ¸ëŠ” ì´ì— ëŒ€í•œ ë¶€ë¶„ì„ ì§ê´€ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆë‹¤..
